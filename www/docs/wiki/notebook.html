<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script type="text/javascript">
//<![CDATA[
var version = {major: 2, minor: 1, revision: 3, date: new Date("Nov 3, 2006"), extensions: {}};
//]]>
</script>
    
<!--
TiddlyWiki 2.1.3 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Copyright (c) Osmosoft Limited 2004-2006

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<!--PRE-HEAD-START-->
<!--{{{-->
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml'/>
<!--}}}-->
<!--PRE-HEAD-END-->
<title> Audiveris Notebook - A notebook about Audiveris work in progress </title>

    <SCRIPT SRC="wiki.js" >
    </SCRIPT>
    <LINK REL="stylesheet" TYPE="text/css" HREF="wiki.css"/>
<!--POST-HEAD-START-->

<!--POST-HEAD-END-->
</head>
<body onload="main();" onunload="if(window.checkUnsavedChanges) checkUnsavedChanges();">
<!--PRE-BODY-START-->

<!--PRE-BODY-END-->
	<script type="text/javascript">
//<![CDATA[
if (useJavaSaver)
	document.write("<applet style='position:absolute;left:-1px' name='TiddlySaver' code='TiddlySaver.class' archive='TiddlySaver.jar' width='1' height='1'></applet>");
//]]>
	</script>
	<div id="copyright">
	Welcome to TiddlyWiki by Jeremy Ruston, Copyright &copy; 2006 Osmosoft Limited
	</div>
	<noscript>
		<div id="javascriptWarning">This page requires JavaScript to function properly</div>
	</noscript>
	<div id="saveTest"></div>
	<div id="contentWrapper"></div>
	<div id="contentStash"></div>
	<div id="storeArea">
<div tiddler="ActionsInSwing" modifier="Hervé" modified="200702131433" created="200702131433" tags="Open">Review the use of Actions within the whole application, to take advantage of their properties, such as name, Tooltip, etc...</div>
<div tiddler="AggressiveCompounds" modifier="Hervé" modified="200702131418" created="200702131418" tags="Closed">Be more aggressive for compounds, using even known glyphs (with a bad rating) trying to reach a compound with better rating.\nThis idea has turned out to be very efficient</div>
<div tiddler="AllClosedItems" modifier="Hervé" modified="200702131517" created="200702131517" tags="">&lt;&lt;listTags Closed title # &gt;&gt; </div>
<div tiddler="AllOpenItems" modifier="Hervé" modified="200702131521" created="200702011204" tags="">This list gathers all items currently tagged as ''Open''. You can also display AllClosedItems.\n&lt;&lt;listTags Open title # &gt;&gt; </div>
<div tiddler="AssigningSlursToParts" modifier="Hervé" modified="200702131346" created="200702012033" tags="Closed">The logic currently in use is to take the first point (left side) of the slur and consider the part of the point to be also the containing part for the slur. This works in most cases, but not in the following example where the first staff is one part, the two other staves are the second part, and the reference point of the slur is closer to staff 1 than to staff 2.\n[img[Top Slur assigned to wrong part|images/slur-part.jpg]] \nA solution would be to take into account the curvature direction of the slur, and more precisely the notes (heads ?, beams ?, stems ?) that are embraced by the slur. Then, simply use their containing part. Here these note heads belong to staff 2, and therefore to part 2.\nAnyway, we need an algorithm to determine the notes which are embraced by a given slur, so let's go this way.</div>
<div tiddler="BeamGroupPainting" modifier="Hervé" modified="200702131423" created="200702131423" tags="Open">Use BeamGroup parameters to forge a common slope for beam painting. The purpose is to come out with a better looking painting of the beams than the current solution based on (rather raw) value of individual beam segments.</div>
<div tiddler="BrowsableSpuriousCollection" modifier="Hervé" modified="200702131358" created="200702131358" tags="Open">The idea is to have an easy way to let the user review (and fix) all the remaining spurious glyphs.</div>
<div tiddler="CirclesVsEllipses" modifier="Hervé" modified="200702131346" created="200702012032" tags="Design">I have tried to approximate Slurs by Ellipses (see the class omr.math.Ellipse). This works but the computed ellipse if often shrunk too much, missing the slur edges by a significant number of pixels. This is reportedly due to the algebraic distance.\nEven if slurs may be closer to Ellipses that Circles, the computed Circles fit rather well. So, for the time being, I approximate Slurs by Circles, using class omr.math.Circle. </div>
<div tiddler="DefaultTiddlers" modifier="Hervé" modified="200702011215" created="200701311038" tags="">AllOpenItems</div>
<div tiddler="DoubleBeam" modifier="Hervé" modified="200702131426" created="200702131426" tags="Open">Implement double beams as recognizable glyphs, in order to cope with connected beams.\nFor the time being, these stuck beams are often mistaken for say a black note head.</div>
<div tiddler="Dynamics" modifier="Hervé" modified="200702131432" created="200702131432" tags="Closed">Dynamics handling is now implemented (Piano, Forte, etc...)</div>
<div tiddler="ExportingNotes" modifier="Hervé" modified="200702131414" created="200702131414" tags="Closed">Export notes to MusicXML file</div>
<div tiddler="ExportingSlurs" modifier="Hervé" modified="200702131348" created="200702012037" tags="Closed">Slurs need to be properly exported to the ~MusicXML file, using the tie element of Note or the slur and/or tied elements of notation in Note (to be clarified with ~MusicXML DTD's and examples).\nThis is done, slurs and ties are correctly exported, with placement/orientation attributes and bezier data as well.</div>
<div tiddler="GlyphProcessing" modifier="Hervé" modified="200702012042" created="200702011201" tags="">! Ideas related to glyph processing\n</div>
<div tiddler="HeadAndFlag" modifier="Hervé" modified="200702131420" created="200702131420" tags="Closed">Use HeadAndFlags symbols all the way to score building.\nActually such a construction is a symbol with stable shape, so proper information regarding note head and number of flags can be easily derived from the recognized symbol</div>
<div tiddler="HeadLocation" modifier="Hervé" modified="200702131408" created="200702131408" tags="Closed">Use bestNote pitch position for better precision of chord headLocation.y</div>
<div tiddler="HelpOnWiki" modifier="Hervé" modified="200702011257" created="200702011256" tags="">[[TiddlyWiki for the rest of us|http://www.giffmex.org/twfortherestofus.html]]</div>
<div tiddler="Lyrics" modifier="Hervé" modified="200702131351" created="200702022054" tags="Open">This feature is dependent upon the more general question of OpticalCharacterRecognition</div>
<div tiddler="MainMenu" modifier="Hervé" modified="200702011158" created="200701311038" tags="">Main Content</div>
<div tiddler="MainWindowLayout" modifier="Hervé" modified="200702131350" created="200702011213" tags="Open">The layout of the main window should be improved.\nHere is the current version :\n[img[Current main window layout|images/main-window.png]]\nWe should get rid of the global action buttons</div>
<div tiddler="MemoryLeak" modifier="Hervé" modified="200702131351" created="200702011713" tags="Closed">There is a memory leak, since the memory remains high after closing both the Sheet and the Score entities.\nTo be investigated with proper tools (''jmap'' and ''jhat'' in Java 6).\n\nLeak has been fixed (it was due to ~SheetManager selection still pointing to the defunct Sheet instance).</div>
<div tiddler="OpticalCharacterRecognition" modifier="Hervé" modified="200702131350" created="200702022057" tags="Open Design">This is an important topic, for which we have to find a separate Java implementation (compatible with the Open Source license of Audiveris)\nOCR features would allow [[Lyrics]], recognition of notations words, of title, composer, etc... </div>
<div tiddler="PitchPositionForEvaluator" modifier="Hervé" modified="200702131417" created="200702131417" tags="Closed">Remove PitchPosition as a parameter for Neural Network as this implies a too strong dependency on pitch position (or would require a lot more training samples).\nInstead, implement post-recognition additional checks.\nThis is now done, but the additional checks would deserve a more systematic approach than provided by the current implementation</div>
<div tiddler="PitchPositionForFlats" modifier="Hervé" modified="200702131412" created="200702131412" tags="Closed">Use icon refPoint (rather than glyph center) to more precisely position flats (accidentals and signatures) with the proper pitch position</div>
<div tiddler="SiteSubtitle" modifier="Hervé" modified="200701311613" created="200701311037" tags="">A notebook about Audiveris work in progress</div>
<div tiddler="SiteTitle" modifier="Hervé" modified="200702011158" created="200701311036" tags="">Audiveris Notebook</div>
<div tiddler="Slurs" modifier="Hervé" modified="200702022050" created="200701311543" tags="">Slurs have specific questions still to be solved :\nCirclesVsEllipses\nAssigningSlursToParts\nSpuriousSlurs\nExportingSlurs\nSlursAndVoices</div>
<div tiddler="SlursAndVoices" modifier="Hervé" modified="200702131349" created="200702022052" tags="Open">Use Slurs (actually ties) to detect lengthened notes, and implement their impact to Voice algorithm.</div>
<div tiddler="SpuriousBeams" modifier="Hervé" modified="200702131351" created="200702012058" tags="Closed">Glyphs are often assigned a Beam shape, simply because of their connection to one or two stems.\n* Here, we have a Slur which crosses a stem :\n[img[Wrong shape assigned|images/beam-spurious.jpg]] It is assigned the BEAM shape, with a doubt value of 1.008\nSimply de-assigning the glyph, will make it build a compound with its neighbors, and be recognized as a Slur :\n[img[Right slur shape recognized|images/beam-deassigned.jpg]] It is assigned the SLUR shape, with a doubt value of 1.000, much better than the initial value.\n\nThis gives me the idea of relaxing the compound attempts : even the well assigned shapes should be called into question and changed for a better compound shape if any.\n\n* Another example, where a Slur is stuck with a Flag, resulting in a spurious Beam :\n[img[Wrong Beam assignment|images/beam-stuck.jpg]]\nand after deassign of the two spurious Beams, the result is a (wrong) Slur compound :\n[img[Wrong Slur compound|images/beam-stuck-deassigned.jpg]]\nIn this case, the (wrong) Slur should be segmented, looking for true circle portions and discarding the rest.</div>
<div tiddler="SpuriousGlyphs" modifier="Hervé" modified="200702131357" created="200702011221" tags="">! Glyph Shape\n* Some glyphs are assigned a shape during preliminary stages using procedural logic based on structure data. This strategy applies for :\n** Ledgers (via horizontal sticks)\n** Barlines (via vertical sticks)\n* The wide majority of glyphs are recognized thanks to the Neural Network module. This accounts for all glyphs with specific shape. In fact, the output of Neural Network is not immediately made public, it has to go through a small stage that perform additional checks depending on the detected shape.\n** This is the case for Time signature, for which the pitch position is checked to lie precisely between the score lines.\n* Even later, additional checks may be performed, using generally more contextual information\n** SpuriousSlurs are a good example of additional checks, with related additional segmentation/aggregation possibilities\n** SpuriousBeams can also be detected.\n* Finally, all remaining spurious glyphs should be collected and presented as a kind of BrowsableSpuriousCollection to the user, who would have thus the ability to take proper actions.</div>
<div tiddler="SpuriousSlurs" modifier="Hervé" modified="200702131345" created="200702012033" tags="Closed">For Slurs with poor distance, two actions can be thought of (to be validated via the computed curve distance) :\n* ''Small slurs'' may be //combined// with nearby glyphs, typically other Slur, or Clutter. Today a tentative compound is valid if and only if the resulting compound doubt value is smaller than the doubt on the initial glyph. We could go beyond this, and (for Slurs only of course) use the curve distance as the proper validation check. Here are two similar examples :\n**Before merging: [img[Two slur portions|images/slur-short.jpg]]      and after merging the 2 glyphs :     [img[Slur compound once recognized|images/slur-short-compound.jpg]]\n**Before merging: [img[Before merging|images/slur-short-2.jpg]]      and after merging the 2 glyphs :     [img[After merging|images/slur-short-compound-2.jpg]]\n\n* ''Large slurs'' may be //segmented// and rebuilt incrementally section after section, while checking the curve distance. The sections left over could then be recombined (using usual connectivity) to form separate glyphs, to be later recognized.\n**Here is on the first picture an example of a long slur with a stuck object (a natural sign). Notice the circle which does not really fit the slur. \n**And the corresponding Section details on the second picture. Obviously, combining the right sections for the slur should be rather easy :\nGlyphs : [img[Glyph view of a long slur|images/slur-long.jpg]]     Sections :  [img[Section view of the same long slur|images/slur-long-sections.jpg]]</div>
<div tiddler="StaffLineCleanup" modifier="Hervé" modified="200702131425" created="200702131425" tags="Open">Debug staff line cleanup, with tangents, to avoid breaking glyphs as much as possible.\nThis is a tough area with important consequences, but the results in some cases are so strange that they deserve a careful analysis for improvement.</div>
<div tiddler="Tuplets" modifier="Hervé" modified="200702131427" created="200702031708" tags="Open">Handling tuplets (triplets, etc...) of notes is still to be implemented</div>
<div tiddler="VoiceBySlot" modifier="Hervé" modified="200702131413" created="200702131413" tags="Closed">Implement voices using slot occupation by chords/notes</div>
<div tiddler="Wedges" modifier="Hervé" modified="200702131428" created="200702131427" tags="Closed">Implement wedges (crescendo, decrescendo).</div>
</div>
<!--POST-BODY-START-->

<!--POST-BODY-END-->
	</body>
</html>
