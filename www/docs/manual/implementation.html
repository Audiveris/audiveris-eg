<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
    <HEAD>
        <!--    $Id$        -->
        <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=windows-1252"/>
        <TITLE>Audiveris Implementation Manual</TITLE>
        <META NAME="AUTHOR" CONTENT="Herv&eacute; Bitteur"/>
        <META NAME="CLASSIFICATION" CONTENT="Implementation Documentation of Audiveris"/>
        <META NAME="DESCRIPTION" CONTENT="Description of Audiveris techniques"/>

        <!-- The following links are meant to be solved on my local PC -->
        <!-- The java.net site uses its own style sheets -->
        <LINK REL="stylesheet" TYPE="text/css" HREF="../../branding/css/tigris.css"/>
        <LINK REL="stylesheet" TYPE="text/css" HREF="../../branding/css/inst.css"/>
        
    </HEAD>
    
    <BODY MARGINWIDTH="0" MARGINHEIGHT="0" CLASS="app">
	
        <H1 ALIGN=CENTER>Audiveris Implementation Manual</H1>
        
        <ADDRESS>Author
            : <A HREF="mailto:herve.bitteur@laposte.net">Herv&eacute;
            Bitteur</A></ADDRESS>
        <ADDRESS>Updated : 07 June 2005</ADDRESS>
        
        <A NAME="PACKAGES">
            <H2>Packages</H2>
        </A>
        
        <P> Purpose of this implementation manual is to help any
            programmer's task : understanding the source code,
            modifying existing functions, adding new features,
            etc...</P>
        <P> Let's begin by a quick overview of the Audiveris
            decomposition in Java packages.</P>
        
        <DIV CLASS="axial">
            
            <A NAME="DRIVING">
                <H3>Driving Packages</H3>
            </A>
            
            <P> The packages that really drive Audiveris application
                are the following ones :</P>
            
            <TABLE WIDTH=100% BORDER=1>
                <TR>
                    <TH>omr.sheet</TH>
                    <TD>
                        This package is dedicated to the handling of
                        the physical music sheet, starting with the
                        image picture, and going through the sequence
                        of processing steps.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.glyph</TH>
                    <TD>
                        The glyph package deals with assemblies of
                        sections of foreground pixels that are matched
                        against predefined shapes. These glyphs can be
                        self-standing symbols (such as a clef) or
                        leaves in larger constructions (such as hote
                        heads and stem in a chord).
                    </TD>
                </TR>
                <TR>
                    <TH>omr.score</TH>
                    <TD>
                        The score package handles the logical music
                        information inferred from recognized glyphs
                        extracted from the physical sheet. The
                        internal representation of such score can be
                        stored on an external support using various
                        data formats, such as binary or XML.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.ui<BR/>omr.glyph.ui</TH>
                    <TD>
                        These two packages are used when Audiveris
                        does not run in batch mode. The former is the
                        general user interface, while the latter is
                        focused on user interface dealing with glyphs.
                    </TD>
                </TR>
            </TABLE>
            
            <A NAME="GEOMETRY">
                <H3>Geometry Packages</H3>
            </A>
            
            <P> Audiveris relies on some geometry foundation packages
		:</P>
            
            <TABLE WIDTH=100% BORDER=1>
                <TR>
                    <TH>omr.graph</TH>
                    <TD>
                        This package implements a generic directed
                        graph, made of vertices linked by directed
                        edges.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.lag</TH>
                    <TD>
                        The lag package deals with Linear Adjacency
                        Graphs, a specialized directed graph where
                        vertices are sections linked by junctions.  A
                        section is simply a connex collection of pixel
                        runs, and a run is a vector of foreground
                        pixels.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.stick</TH>
                    <TD>
                        The stick package handles sticks, that are
                        collections of sections forming either long
                        filaments (such as staff lines) or shorter and
                        straighter segments (such as bar lines, stems,
                        ledgers, etc...).
                    </TD>
                </TR>
            </TABLE>
            
            <A NAME="UTILITY">
                <H3>Utility Packages</H3>
            </A>
            
            <P> The following packages should be considered as
                implementation helpers :</P>
            
            <TABLE WIDTH=100% BORDER=1>
                <TR>
                    <TH>omr.check</TH>
                    <TD>
                        Here we define checks, organized in check
                        suites, to run series of checks to filter out
                        some candidates when looking for precise
                        entities. This filtering technique is quite
                        rough, and should perhaps be replaced by
                        proper use of specific neural networks.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.constant</TH>
                    <TD>
                        Purpose of this package is to handle
                        application logical constants in a common way,
                        from their definition in their hosting
                        classes, their potential on-line modification,
                        and their persistency on disk.  If one day
                        Audiveris migrates to NetBeans platform, the
                        bulk of this package should disappear.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.math</TH>
                    <TD>
                        This is a basic collection of mathematics
                        constructions such as lines, regressions,
                        neural networks.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.ui.treetable</TH>
                    <TD>
                        Stolen from some Sun documentation, this
                        implements a Tree/Table combination.  This
                        should be replaced by proper use of some JDNC
                        JTreeTable entity when it gets available.
                    </TD>
                </TR>
                <TR>
                    <TH>omr.util</TH>
                    <TD>
                        This package gathers various utilities that
                        are not significant enough to deserve their
                        own package.
                    </TD>
                </TR>
            </TABLE>
            
        </DIV>
        
        <A NAME="SHEET_SCORE">
            <H2>Sheet and Score</H2>
        </A>
        
        <P> A <B>Sheet</B> handles the physical entities as extracted
            from the printed music sheet, while the <B>Score</B>
            handles a structuring of the inferred logical
            entities. This distinction has lead to the development of
            two separate packages, namely <I>omr.sheet</I>
            and <I>omr.score</I>.</P>
        <P> Many entities of one package have their counterpart in the
            other package, with link from one instance to the
            other. The following table lists the corresponding
            entities in <I>omr.sheet</I> and in <I>omr.score</I>
            packages, together with the Builder class that is in
            charge of extracting these entities.</P>
        <P> For example, an instance of <B>Score</B> class is the
            counterpart of an instance of <B>Sheet</B> class. (We
            assume that several printed pages can be combined as a
            mosaic beforehand, so that we have to process just one
            long <B>Sheet</B>).</P>
        <P> The next line states that a <B>System</B> in the
	    <I>omr.score</I> package is the counterpart of
	    a <B>SystemInfo</B> in the <I>omr.sheet</I> package, and
	    that the class <B>BarsBuilder</B> is in charge of
	    processing them.</P>
        
        
        <TABLE>
            <TR>
                <TH>from omr.score package</TH>
                <TH>from omr.sheet
		    package<BR/>(model&nbsp;classes)</TH>
                <TH>from omr.sheet
		    package<BR/>(builder&nbsp;classes)</TH>
            </TR>
            <TR>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/score/Score.html">
                        Score</A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/Sheet.html">
                        Sheet</A></TD>
            </TR>
            <TR>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/score/System.html">
                        System</A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/SystemInfo.html">
                        SystemInfo</A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/BarsBuilder.html">
                        BarsBuilder</A> handles the vertical lines
                        that are recognized as bar lines</TD>
            </TR>
            <TR>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/score/Stave.html">
                        Stave</A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/StaveInfo.html">
                        StaveInfo</A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/LinesBuilder.html">
                        LinesBuilder</A> processes the stave areas,
                        according to the series of peaks found in the
                        horizontal projection.</TD>
            </TR>
            <TR>
                <TD></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/LineInfo.html">
                        LineInfo </A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/LinesBuilder.html">
                        LineBuilder</A> processes the horizontal area
                        that corresponds to one histogram peak, and
                        thus to one stave line.</TD>
            </TR>
            <TR>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/score/Measure.html">
                        Measure </A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/BarInfo.html">
                        BarInfo </A></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/BarsBuilder.html">
                        BarsBuilder</A> processes the vertical lines
                        that are recognized as bar lines.
                </TD>
            </TR>
            <TR>
                <TD></TD>
                <TD><A
                        HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/Ledger.html">
                        Ledger </A></TD>
		<TD><A
			HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/HorizontalsBuilder.html">
			HorizontalsBuilder</A> retrieves horizontal
			dashes in the given sheet. We use it for all
			horizontal glyphs (ledgers of course, but also
			legato signs or alternate endings).
		</TD>
	    </TR>
	    <TR>
		<TD></TD>
		<TD><A
			HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/Ending.html">
		    Ending </A></TD>
		<TD>see HorizontalsBuilder above
		</TD>
	    </TR>
	    <TR>
		<TD></TD>
		<TD><A
			HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/stick/Stick.html">
			Stick</A> (vertical) </TD>
		<TD><A
			HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/sheet/VerticalsBuilder.html">
			VerticalsBuilder</A> retrieves all the
			vertical sticks of all systems in the sheet at
			hand. Bars are assumed to have been already
			recognized, so this accounts for stems,
			vertical edges of endings, and parts of
			alterations (sharp, natural, flat).
		</TD>
	    </TR>
	    
	    <TR>
		<TD></TD>
		<TD> <A
			 HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/glyph/Glyph.html">
			 Glyph </A></TD>
		<TD><A
			HREF="https://audiveris.dev.java.net/nonav/docs/api/omr/glyph/GlyphBuilder.html">
			GlyphBuilder</A> gathers non-assigned
			remaining glyphs out of a sheet.
		</TD>
	    </TR>
	</TABLE>
	
	
	<BR/> <BR/> <HR/>
	<I>End of Implementation Manual</I>
	
    </BODY>
</HTML>
