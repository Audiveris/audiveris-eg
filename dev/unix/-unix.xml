<!-- +=====================================================================+ -->
<!-- |                                                                     | -->
<!-- |                         - u n i x . x m l                           | -->
<!-- |                                                                     | -->
<!-- +=====================================================================+ -->

<project name="unix" basedir="../..">
  
    <description>
        All targets specific to Unix platform.
    
        Targets are presented in alphabetical order, regardless of initial '-'.
        An initial '-' indicates an internal target.
        (and all targets here should be internal)
    </description>
  
    <!--
      TODO: Populate this skeleton as needed.
    -->    
  
    <!-- ===  Internal Targets  ============================================ --> 
  
  
    <!-- ============= -->
    <!--  - C L E A N  -->
    <!-- ============= -->
    <target name="-clean"
            if="${is.unix}" unless="${is.mac}">
        <!-- Remove all the generated outputs for Unix -->
        <delete dir="${dist.dir}/AudiverisLinux" includeemptydirs="true"/>
    </target>
  
  
    <!-- ======================= -->
    <!--  - I N S T A L L E R S  -->
    <!-- ======================= -->
    <!-- Build Unix installers for x86 and x64 architectures-->
    <target name="-installers"
            depends=""
            if="${is.unix}" unless="${is.mac}">
        <echo message="Build generic Linux package" />
        
        <!-- First phase: building generic Linux package -->
        <!-- add the wrapper script -->
        <mkdir dir="${dist.dir}/AudiverisLinux"/>
        <copy 
           verbose="${verbose}"
           todir="${dist.dir}/AudiverisLinux"
           file="${dev.dir}/unix/audiveris.sh">
        </copy>
        
        <!-- copy over application jar and its libraries -->
        <mkdir dir="${dist.dir}/AudiverisLinux/AudiverisApp"/>
        <!--<mkdir dir="${dist.dir}/AudiverisLinux/AudiverisApp/dist"/> -->
        
        <copy 
           verbose="${verbose}"
           todir="${dist.dir}/AudiverisLinux/AudiverisApp/dist">
           <fileset dir="${dist.dir}"
                     includes="*.jar"/>
        </copy>
        <copy todir="${dist.dir}/AudiverisLinux/AudiverisApp/dist/lib">
            <fileset dir="${dist.dir}/lib"/>
        </copy>
        
        <!-- copy over JNI libraries -->
        <copy todir="${dist.dir}/AudiverisLinux/AudiverisApp/TessBridgeJNI">
            <fileset dir="${dev.dir}/unix/TessBridgeJNI"/>
        </copy>
        
        <!-- copy over resources, examples and documentation -->
        <copy todir="${dist.dir}/AudiverisLinux/AudiverisApp/res">
            <fileset dir="${res.dir}"/>
        </copy>
        <copy todir="${dist.dir}/AudiverisLinux/AudiverisApp/examples">
            <fileset dir="${examples.dir}"/>
        </copy>
        <copy todir="${dist.dir}/AudiverisLinux/AudiverisApp/www">
            <fileset dir="${www.dir}"/>
        </copy>
    </target>
  
</project>
