<!-- +=====================================================================+ -->
<!-- |                                                                     | -->
<!-- |                        - e x e c s . x m l                          | -->
<!-- |                                                                     | -->
<!-- +=====================================================================+ -->

<project name="-execs" basedir="../..">
    
    <description>
	Targets for building Audiveris Windows executables
    </description>

    <!-- launch4j task definition -->
    <taskdef name="launch4j"
	     classname="net.sf.launch4j.ant.Launch4jTask">
	<classpath>
	    <fileset dir="${launch4j.dir}" includes="launch4j.jar" />
	    <fileset dir="${launch4j.dir}/lib" includes="xstream.jar" />
	</classpath>
    </taskdef>
    
    <!-- ========= -->
    <!--  - B A T  -->
    <!-- ========= -->
    <target name="-bat"
            depends="-init">
<!--        description="Generate the DOS command" -->

        <!-- .bat file for windows -->
        <echo file="${basedir}/${name}.bat" append="false">@ECHO OFF
REM ${name}.bat
setlocal
java -Xms512M -Xmx512M -jar dist/${full.name}.jar %1 %2 %3 %4 %5 %6 %7 %8 %9
endlocal
        </echo>
        
    </target>

    <!-- ========= -->
    <!--  - E X E  -->
    <!-- ========= -->
    <target name="-exe"
	    description="Build Windows executable without console">
	<launch4j>
	    <config headerType="gui"
		    outfile="${name}.exe"
		    dontWrapJar="true"
		    jarPath="dist/${full.name}.jar" >
		<jre minVersion="${jre.min}"/>
		<splash file="${res.dir}/splash.bmp"/>
	    </config>
	</launch4j>	
    </target>

    <!-- ========================= -->
    <!--  - E X E - C O N S O L E  -->
    <!-- ========================= -->
    <target name="-exe-console"
	    description="Build Windows executable with console">
	<launch4j fileVersion="${impl.version}.${ant4hg.log.revision}">
	    <config headerType="console"
		    outfile="${name}-console.exe"
		    dontWrapJar="true"
		    jarPath="dist/${full.name}.jar" >
		<jre minVersion="${jre.min}"/>
	    </config>
	</launch4j>	
    </target>

    <!-- =========== -->
    <!--  E X E C S  -->
    <!-- =========== -->
    <target name="execs"
	    depends="-bat, -exe, -exe-console"
	    description="Build all Windows executables"/>
    
</project>
